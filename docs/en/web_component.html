<html>
<head>
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>
JavaScript Framework fairy support js Web component
</title>
<link rel="stylesheet" href="./css/mb/common.css" type="text/css">
<link rel="stylesheet" href="./css/pc/common.css" type="text/css" media="screen and (min-width:740px)">
</head>
<body>
<header class="header">
    <div class="title">JavaScript&nbsp;Framework&nbsp;fairy&nbsp;support&nbsp;js</div>
</header>
<div class="body">
     <div class="table-of-contents-link"><a href="index.html">table of contents</a></div>
     <div class="subtitle">Web component</div>
     <article class="article">
         <section>
             <p>
                 <span>Component can be placed on different server</span><br>
             </p>
             
             <h1>How to use</h1>

             <p>
                 <span>Let's create index.html, index.js.</span><br>
             </p>
             <span class="code-title">index.html</span>
             <br>
             <pre class="code-view">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;/&gt;
&lt;title&gt;
sample
&lt;/title&gt;
&lt;script id=&quot;fs-js&quot; src=&quot;http://localhost:8000/js/fairysupport.min.js&quot; data-page-root=&quot;http://localhost:8000/page&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div data-obj=&quot;obj&quot;&gt;&lt;/div&gt;
    &lt;div&gt;&lt;button data-name=&quot;sample&quot;&gt;sample&lt;/button&gt;&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
             <span class="code-title">index.js</span>
             <br>
             <pre class="code-view">
export class Index {

    constructor() {
    }

    sample_click(event) {
        $f.loadWebComponent(this.obj, 'http://localhost:8080/web_component', 'sample', {'key1': 'val1'})
        .then(this.success.bind(this))
        .catch(this.error.bind(this));
    }
    
    success(nodeList) {
        console.log(&quot;success&quot;);
    }
    
    error(exception) {
        alert(&quot;error&quot;);
        console.error(exception);
    }
    
}
</pre>
             <p>
                 <span>Let's create src/js/components/sample/controller.js, src/js/components/sample/view.html.</span><br>
             </p>
             <span class="code-title">src/js/components/sample/controller.js</span>
             <br>
             <pre class="code-view">
export class Sample {

    constructor() {
    }

    sample1_click(event) {
        alert(this.obj.value);
    }

    sample2_click(event) {
        let str = '';
        for (const item of this.list.values()) {
            str += item.value;
        }
        alert(str);
    }

}
</pre>
             <span class="code-title">src/js/components/sample/view.html</span>
             <br>
             <pre class="code-view">
&lt;div data-text='v.key1'&gt;&lt;/div&gt;

&lt;div&gt;&lt;input type='text' data-obj-web='obj' /&gt;&lt;/div&gt;
&lt;button data-name-web=&quot;sample1&quot;&gt;click&lt;/button&gt;

&lt;div&gt;&lt;input type='text' data-list-web='list' /&gt;&lt;/div&gt;
&lt;div&gt;&lt;input type='text' data-list-web='list' /&gt;&lt;/div&gt;
&lt;button data-name-web=&quot;sample2&quot;&gt;click&lt;/button&gt;
</pre>

             <p>
                 <span>As explained in the <a href="build.html">Build</a>, the final product of the component is the file under js/components in distWork or dist.</span><br>
                 <span>Deploy the file under js/components in distWork or dist in the public directory of another server where CORS is set.</span><br>
                 <span>Please prepare your own web server with CORS settings.</span><br>
                 <span>For example, in the case of Apache, add the following in the Directory, Location, Files, VirtualHost tag of the configuration file</span><br>
                 <span>Header always set Access-Control-Allow-Origin http://localhost:8000</span><br>
                 <span>Header always set Access-Control-Allow-Credentials true</span><br>
                 <span>Header always set Access-Control-Allow-Headers "Accept, Content-Type, X-Requested-With"</span><br>
                 <span>Here, as an example, the web server with CORS set is assumed to be http://localhost:8080.</span><br>
                 <span>This time, create a directory named web_component directly under the public directory of the server where CORS is set, and put the sample directory under js/components generated by the build.</span><br>
                 <span>Let's run and click the sample button.</span><br>
                 <span>The component placed on the server where CORS is set is output.</span><br>
                 <span>Pass the Web component output destination to the first argument of loadWebComponent.</span><br>
                 <span>Pass the URL of the Web component storage destination as the second argument of loadWebComponent.</span><br>
                 <span>Pass the component name (directory name) to the third argument of loadWebComponent.</span><br>
                 <span>Pass the variable used in the view of the web component to the fourth argument of loadWebComponent.</span><br>
                 <span>If you set appendLoadWebComponent instead of loadWebComponent, the body part will be added to the body part instead of replacing it.</span><br>
                 <span>If you set beforeLoadWebComponent instead of loadWebComponent, the body part will be added just before the first argument instead of replacing.</span><br>
                 <span>If afterLoadWebComponent is used instead of loadWebComponent, the body part will be added immediately after the first argument instead of replacing it.</span><br>
                 <span>You can also create subdirectories under js/components. In that case, pass a string separated by period as the third argument of loadWebComponent.</span><br>
                 <span>The tag with the data-name-web attribute in the component's view.html is bound to the method of the component's controller.js class.</span><br>
                 <span>If you define a method named &quot;data-name-web attribute value&quot;_&quot;event name&quot; in the component's controller.js, this framework will automatically bind the tag with the data-name-web attribute in the component's view.html to the method in component's controller.js</span><br>
                 <span>The tag with the data-obj-web attribute in the component's view.html is bound to the field of the component's controller.js class.</span><br>
                 <span>The tag with the data-list-web attribute in the component's view.html is bound to the field of the component's controller.js class.</span><br>
                 <span>Web components are treated as <a href="unique_component.html">unique component</a>. Cannot be a <a href="single_component_event.html">single component</a>.</span><br>
             </p>
             <br>
             
             <h1>Call a web component from a template, view.html of component</h1>

             <p>
                 <span>Example</span><br>
             </p>

             <pre class="code-view">
&lt;script data-load-only='true'&gt;
        l.nestVal = {'key1': 'val1'};
&lt;/script&gt;
&lt;div data-web-component-url='http://localhost:8080/web_component' data-web-component='sample2' data-web-component-variable='l.nestVal'&gt;&lt;/div&gt;</pre>

             <p>
                 <span>The data-web-component-url attribute value is the same as the second argument of loadWebComponent.</span><br>
                 <span>The data-web-component attribute value is the same as the third argument of loadWebComponent.</span><br>
                 <span>The data-web-component-variable attribute value is the same as the fourth argument of loadWebComponent.</span><br>
                 <span>The web component is loaded inside the tag with the data-web-component, data-web-component-url, data-web-component-variable attributes.</span><br>
             </p>
             
             <br>
             
             <p>
                 <span><a href="other.html">Next page</a> Others</span>
                 <br>
                 <br>
                 <span><a href="index.html">table of contents</a></span>
                 <br>
             </p>

             <br>

         </section>
     </article>
</div>
<footer class="footer">
</footer>
</body>
</html>