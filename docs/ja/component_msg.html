<html>
<head>
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>
JavaScript フレームワーク fairy support js コンポーネントのメッセージ
</title>
<link rel="stylesheet" href="./css/mb/common.css" type="text/css">
<link rel="stylesheet" href="./css/pc/common.css" type="text/css" media="screen and (min-width:740px)">
</head>
<body>
<header class="header">
    <div class="title">JavaScript&nbsp;フレームワーク&nbsp;fairy&nbsp;support&nbsp;js</div>
</header>
<div class="body">
     <div class="table-of-contents-link"><a href="index.html">目次</a></div>
     <div class="subtitle">コンポーネントのメッセージ</div>
     <article class="article">
         <section>
             <h1>システム全体</h1>

             <p>
                 <span>src/js/components/sample/controller.jsを修正しましょう</span><br>
             </p>
             <span class="code-title">src/js/components/sample/controller.js</span>
             <br>
             <pre class="code-view">
export class Sample {

    constructor() {
    }

    sample_click(event) {
        alert(
            $f.componentMsg('sample', 'key1', {'replace1': 'val1', 'replace2': 'val2', 'replace3': 'val3'}) + &quot;\n&quot; +
            $f.componentMsg('sample', 'key2', {'replace1': 'val1', 'replace2': 'val2', 'replace3': 'val3'})
        );
    }

}
</pre>

             <p>
                 <span>src/js/components/msg.json、src/js/components/msg.ja.json、src/js/components/msg.ja-JP.json、src/js/components/msg.en.json、src/js/components/msg.en-US.jsonを作成しましょう</span><br>
             </p>
             <span class="code-title">msg.json</span>
             <br>
             <pre class="code-view">
{
     &quot;key1&quot; : &quot;key1 => ${replace1}--\\${replace1}--${replace1}--${replace2}--${replace3}&quot;
    ,&quot;key2&quot; : &quot;key2 => ${replace1}--\\${replace1}--${replace1}--${replace2}--${replace3}&quot;
}
</pre>
             <span class="code-title">msg.ja.json</span>
             <br>
             <pre class="code-view">
{
     &quot;key1&quot; : &quot;key1 => ja ${replace1}--\\${replace1}--${replace1}--${replace2}--${replace3}&quot;
    ,&quot;key2&quot; : &quot;key2 => ja ${replace1}--\\${replace1}--${replace1}--${replace2}--${replace3}&quot;
}
</pre>
             <span class="code-title">msg.ja-JP.json</span>
             <br>
             <pre class="code-view">
{
     &quot;key1&quot; : &quot;key1 => ja-JP ${replace1}--\\${replace1}--${replace1}--${replace2}--${replace3}&quot;
    ,&quot;key2&quot; : &quot;key2 => ja-JP ${replace1}--\\${replace1}--${replace1}--${replace2}--${replace3}&quot;
}
</pre>
             <span class="code-title">msg.en.json</span>
             <br>
             <pre class="code-view">
{
     &quot;key1&quot; : &quot;key1 => en ${replace1}--\\${replace1}--${replace1}--${replace2}--${replace3}&quot;
    ,&quot;key2&quot; : &quot;key2 => en ${replace1}--\\${replace1}--${replace1}--${replace2}--${replace3}&quot;
}
</pre>
             <span class="code-title">msg.en-US.json</span>
             <br>
             <pre class="code-view">
{
     &quot;key1&quot; : &quot;key1 => en-US ${replace1}--\\${replace1}--${replace1}--${replace2}--${replace3}&quot;
    ,&quot;key2&quot; : &quot;key2 => en-US ${replace1}--\\${replace1}--${replace1}--${replace2}--${replace3}&quot;
}
</pre>
             
             <p>
                 <span>実行してsampleボタンをクリック後、component sampleボタンをクリックしてみましょう</span><br>
                 <span>src/js/components配下に作成したjsonファイル内の値が出力されます</span><br>
                 <span>controller.js内で実行している$f.componentMsgは</span><br>
                 <span>src/js/components配下に作成したmsg.json内の値を返すメソッドです</span><br>
                 <span>componentMsgは第一引数にコンポーネント名、第二引数にmsg.jsonのキーを受け取ります</span><br>
                 <span>componentMsgメソッドの第三引数はjson内の${}で囲われた箇所を置換する値です。置換したくない場合は\を付けてください</span><br>
                 <span>msg.jsonはjsonなのでキー、値はダブルクォートで囲います。シングルクォートではありません</span><br>
                 <span>コンポーネントで使うmsg.jsonはsrc/js/components配下に作成します。これはフレームワークの規則です</span><br>
                 <span>また、msg.jsonだけでなく、msg.{使用する言語}.jsonを用意できます</span><br>
                 <span>使用する言語はクエリパラメーターlangの値、navigator.languageの値の優先順で適用されます</span><br>
                 <span>したがって、URLに?lang=enを付けてアクセスするとmsg.en.jsonに定義した値が出力されます</span><br>
                 <span>msg.{使用する言語}.jsonが存在しない場合、msg.jsonが適用されます</span><br>
                 <span>したがって、msg.ja.json、msg.ja-JP.json、msg.en.json、msg.en-US.jsonを削除してアクセスするとmsg.jsonに定義した値が出力されます</span><br>
             </p>
             <br>
             
             <h1>コンポーネント固有</h1>

             <p>
                 <span>src/js/components/sample/msg.json、src/js/components/sample/msg.ja.json、src/js/components/sample/msg.ja-JP.json、src/js/components/sample/msg.en.json、src/js/components/sample/msg.en-US.jsonを作成しましょう</span><br>
             </p>
             <span class="code-title">src/js/components/sample/msg.json</span>
             <br>
             <pre class="code-view">
{
     &quot;key1&quot; : &quot;key1 => component ${replace1}--\\${replace1}--${replace1}--${replace2}--${replace3}&quot;
    ,&quot;key2&quot; : &quot;key2 => component ${replace1}--\\${replace1}--${replace1}--${replace2}--${replace3}&quot;
}
</pre>
             <span class="code-title">src/js/components/sample/msg.ja.json</span>
             <br>
             <pre class="code-view">
{
     &quot;key1&quot; : &quot;key1 => component ja ${replace1}--\\${replace1}--${replace1}--${replace2}--${replace3}&quot;
    ,&quot;key2&quot; : &quot;key2 => component ja ${replace1}--\\${replace1}--${replace1}--${replace2}--${replace3}&quot;
}
</pre>
             <span class="code-title">src/js/components/sample/msg.ja-JP.json</span>
             <br>
             <pre class="code-view">
{
     &quot;key1&quot; : &quot;key1 => component ja-JP ${replace1}--\\${replace1}--${replace1}--${replace2}--${replace3}&quot;
    ,&quot;key2&quot; : &quot;key2 => component ja-JP ${replace1}--\\${replace1}--${replace1}--${replace2}--${replace3}&quot;
}
</pre>
             <span class="code-title">src/js/components/sample/msg.en.json</span>
             <br>
             <pre class="code-view">
{
     &quot;key1&quot; : &quot;key1 => component en ${replace1}--\\${replace1}--${replace1}--${replace2}--${replace3}&quot;
    ,&quot;key2&quot; : &quot;key2 => component en ${replace1}--\\${replace1}--${replace1}--${replace2}--${replace3}&quot;
}
</pre>
             <span class="code-title">src/js/components/sample/msg.en-US.json</span>
             <br>
             <pre class="code-view">
{
     &quot;key1&quot; : &quot;key1 => component en-US ${replace1}--\\${replace1}--${replace1}--${replace2}--${replace3}&quot;
    ,&quot;key2&quot; : &quot;key2 => component en-US ${replace1}--\\${replace1}--${replace1}--${replace2}--${replace3}&quot;
}
</pre>
             
             <p>
                 <span>実行してsampleボタンをクリック後、component sampleボタンをクリックしてみましょう</span><br>
                 <span>src/js/components/sample配下に作成したjsonファイル内の値が出力されます</span><br>
                 <span>src/js/components/sample配下に作成したmsg.jsonは、第一引数がsampleである場合にのみ使用できます</span><br>
             </p>
             <br>
             
             
             <p>
                 <span><a href="component_web_param.html">次ページ</a>コンポーネントに渡す値をサーバーから受け取る</span>
                 <br>
                 <br>
                 <span><a href="index.html">目次</a></span>
                 <br>
             </p>

             <br>

         </section>
     </article>
</div>
<footer class="footer">
</footer>
</body>
</html>